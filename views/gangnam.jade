extends layout
block content
  .slant-container.right
    #veil
    video(id="gangnamVideo", autoplay, loop, muted)
      source(src='gangnamStyle.mp4', type='video/mp4')
    if inHomeState
      #tab-content
        .container 
    else
      #tab-content.active
        .container.active
          !{tabContent}
  .slant(class=inHomeState? "home" : "")
    .slant-container.left
      #header 
        .vertical-align-container#header-title 
          .vertical-align-content
            .capitalized G
            | ANGNAM
            .capitalized W
            | AVE
        .vertical-align-container#header-container
          mixin headerButton(name)
            - var buttonId = [name, 'button'].join('-')
            - var buttonClass = inHomeState? "home" : ""
            .vertical-align-content.header-button(id=buttonId, class=buttonClass) #{name.toUpperCase()}
          +headerButton('menu')
          //- +headerButton('home')
          //- +headerButton('about')
      .vertical-align-container#title-container(class=inHomeState? "" : "hidden")
        .vertical-align-content#title
          .capitalized G
          | ANGNAM   
          .capitalized W
          | AVE
          .subtitle AMES 471: World of Korean Cinema

  #slant-drawer(class=inHomeState? 'hidden' : '')
    mixin slantTab(name, contents)
      - var hiddenClass = inHomeState? 'hidden' : ''
      - var activeClass = (tabState === name)? 'active' : ''
      - var tabClass = [hiddenClass, activeClass].join(' ').trim()
      .slant-tab(data-link=name, class=tabClass)
        .vertical-align-container.slant-tab-container
          .vertical-align-content.slant-tab-content
            each content in contents
              if content.charAt(0) === '<'
                !{content}
              else
                .capitalized= content.charAt(0)
                = content.substring(1, content.length) + ' '

    .slant-drawer-container
      .slant-tabs
        +slantTab('introduction', ['INTRODUCTION'])
        +slantTab('whoIsPsy', ['WHO IS', 'PSY'])
        +slantTab('masculinity', ['MASCULINITY IN', '<br>', 'KOREAN', 'POP', 'CULTURE'])
        +slantTab('psyMasculinity', ['PSY AND', 'MASCULINITY'])
        +slantTab('viral', ['GANGNAM', 'GOES', 'VIRAL'])
        +slantTab('consequences', ['CONSEQUENCES OF', 'VIRALITY'])
        +slantTab('discussion', ['DISCUSSION'])
        +slantTab('conclusion', ['CONCLUSION'])
 
